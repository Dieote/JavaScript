<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendario Laboral</title>
  <link rel="stylesheet" href="calendario.css">
  <link rel="stylesheet" href="pdfVisor.css">
</head>

<body>

  <!-- <header class="institucional-header">
    <div class="brand">
      <img src="assets/logoOSI.png" alt="Food Safety Always" class="brand-logo">
      <div class="brand-text">
        <h1>Food Safety Always</h1>
        <p>Look out, Speak up, Act now.</p>
      </div>
    </div>
  </header> -->

  <div class="app-container">
    <header class="top-bar">
      <h1>Calendario Laboral</h1>
      <select class="trabajador-select" id="trabajadorSelect">
        <option value="">Seleccionar trabajador</option>
      </select>
    </header>



   <div class="calendar-controls">
      <div class="nav-group">
        <button id="prevYear"    title="A√±o anterior">&#9664;&#9664; <span class="btn-label">A√±o</span></button>
        <button id="prevMonth"   title="Mes anterior">&#9664; <span class="btn-label">Mes</span></button>
      </div>

      <h2 id="monthYear"></h2>

      <div class="nav-group">
        <button id="nextMonth"   title="Mes siguiente"><span class="btn-label">Mes</span> &#9654;</button>
        <button id="nextYear"    title="A√±o siguiente"><span class="btn-label">A√±o</span> &#9654;&#9654;</button>
      </div>

      <div class="nav-group nav-actions">
        <button id="irAHoy"      title="Ir a hoy">&#8962; Hoy</button>
        <button id="toggleVista" title="Cambiar vista">&#9783; Vista Anual</button>
        <button id="buscarSemana" title="Buscar semana">&#9906; Semana</button>
      </div>
    </div>

      <input type="file" id="excelInput" accept=".xlsx" title="Cargar archivo Excel"/> <!--display none -->

    <div class="calendar-container" id="calendarContainer">
      <table class="calendar" id="calendarTable">
        <thead>
          <tr>
            <th>Semana</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
            <th>S√°bado</th>
            <th>Domingo</th>
          </tr>
          <tbody id="calendarBody"></tbody>
        </thead>
      </table>
    </div>
  </div>

  <!-- Leyenda de colores + Estad√≠sticas  -->
  <div class="panels-container">

    <div class="leyenda-container" id="leyendaContainer">
      <div class="leyenda-header">
        <h3>üé® Leyenda de Estados</h3>
        <button id="toggleLeyenda" class="btn-toggle-leyenda">Mostrar</button>
      </div>
      <div class="leyenda-content" id="leyendaContent" style="display: none;">
        <div class="leyenda-grid">
          <div class="leyenda-item">
            <div class="leyenda-color estado-trabajado"></div>
            <span class="leyenda-texto">Trabajado</span>
          </div>
          <div class="leyenda-item">
            <div class="leyenda-color estado-vacaciones"></div>
            <span class="leyenda-texto">Vacaciones</span>
          </div>
          <div class="leyenda-item">
            <div class="leyenda-color estado-libre"></div>
            <span class="leyenda-texto">D√≠a libre</span>
          </div>
          <div class="leyenda-item">
            <div class="leyenda-color estado-festivo"></div>
            <span class="leyenda-texto">Festivo</span>
          </div>
          <div class="leyenda-item">
            <div class="leyenda-color estado-puente"></div>
            <span class="leyenda-texto">Puente</span>
          </div>
          <div class="leyenda-item">
            <div class="leyenda-color estado-desconocido"></div>
            <span class="leyenda-texto">Sin datos</span>
          </div>
        </div>
      </div>
    </div>
    </div>

<div class="panels-container">

  <div class="estadisticas-container" id="estadisticasContainer">
    <div class="estadisticas-header">
      <h3>üìä Estad√≠sticas</h3>
      <button id="toggleEstadisticas" class="btn-toggle">Mostrar</button>
    </div>

    <div class="estadisticas-content" id="estadisticasContent" style="display:none;">
      <div class="estadisticas-info">
        Selecciona un trabajador para ver sus estad√≠sticas
      </div>
    </div>
  </div>
</div>

  </div>

  <div class="pdf-section">
    <section class="pdf-viewer">

      <header class="pdf-header">
        <h2>Visor de documentos</h2>
      </header>

      <!-- Barra de herramientas -->
      <div class="pdf-toolbar">
        <button id="zoomOut">‚àí</button>
        <span class="zoom-level">100%</span>
        <button id="zoomIn">+</button>

        <div class="separator"></div>

        <button id="prevPage">‚óÄ</button>
        <span class="page-indicator">P√°gina 1 / 1</span>
        <button id="nextPage">‚ñ∂</button>
      </div>

      <!-- Contenedor del visor -->
      <div class="pdf-container">
        <div class="pdf-scroll">
          <!-- Aqu√≠ pdf.js insertar√° los canvas -->
          <div id="pdfViewerContainer">
            <canvas id="pdfCanvas"></canvas>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="calendario.js"></script>
  <script src="excel.js"></script>
  <script src="estadisticas.js"></script>
  <script src="pdfVisor.js"></script>

<!-- Cargar PDF autom√°ticamente -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        if (typeof pdfVisor !== 'undefined') {
          fetch('assets/CuadranteVacuno2026.pdf')
            .then(response => response.blob())
            .then(blob => {
              const file = new File([blob], 'CuadranteVacuno2026.pdf', { type: 'application/pdf' });
              pdfVisor.leerArchivo(file);
              console.log('‚úÖ PDF cargado autom√°ticamente');
            })
            .catch(error => {
              console.log('‚ö†Ô∏è No se pudo cargar el PDF autom√°ticamente');
            });
        }
      }, 500);
    });
  </script>

</body>
<footer class="footer-institucional">
  <div class="footer-grid">

    <div class="footer-column">
      <!-- <img src="assets/logoOSI.png" alt="Logo Institucional" style="width: 150px; margin-bottom: 15px;"> -->
      <p style="font-size: 0.85rem; line-height: 1.6; color: #bbb;">
        Este proyecto esta pensado para ayudar a facilitar la gesti√≥n del calendario laboral de trabajadores. Con el
        objetivo de mejorar
        la organizaci√≥n y planificaci√≥n de los turnos, vacaciones y d√≠as libres, proporcionando una herramienta visual e
        interactiva. PRoyecto personal
        sin animo de lucro, es un proyecto personal para aprender y compartir conocimientos sobre desarrollo web.
    </div>

    <div class="footer-column">
      <h4>Navegaci√≥n</h4>
      <ul class="footer-links">
        <li><a href="#">Inicio</a></li>
        <li><a href="#">Ir a OSI FOOD</a></li>
        <li><a href="#">Ir a ATOSS</a></li>
        <li><a href="#">Ver en maps</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>Redes</h4>
      <ul class="social-links">
        <li><a href="#"><img src="/assets/instagram.png" alt="Instagram">Instagram</a></li>
        <li><a href="#"><img src="/assets/github.png" alt="GitHub">Git-Hub</a></li>
        <li><a href="#"><img src="/assets/linkedin.png" alt="LinkedIn">LinkedIn</a></li>
      </ul>
    </div>

    <!-- Columna 4: Contacto Directo -->
    <div class="footer-column">
      <h4>Contacto</h4>
      <p>
        üìçDiego Gomez Modolo<br>
        üìû +34 1234-5678<br>
        ‚úâÔ∏è diegosMail@gmail.com
      </p>
    </div>

  </div>

  <!-- Barra Inferior de Copyright -->
  <div style="text-align: center; padding-top: 20px; font-size: 0.8rem; color: #777;">
    <p>&copy; 2026 Todos los derechos reservados para Diego Gomez Modolo.</p>
  </div>
</footer>

</html>