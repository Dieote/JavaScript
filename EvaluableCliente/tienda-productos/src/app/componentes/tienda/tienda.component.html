<div class="contenedor">
  <header class="cabecera">
    <h1>Tienda Online</h1>
    <button class="btn-carrito" [class.activo]="totalUnidades > 0" (click)="toggleCarrito()">
       Carrito
    </button>
  </header>

  <main class="catalogo">
    <div *ngIf="cargando" class="cargando">
      <div class="spinner"></div>
      <p>Cargando productos...</p>
    </div>

    <div *ngIf="error" class="error">
      {{ error }}
    </div>

    <div *ngIf="!cargando && !error && productosFiltrados.length === 0" class="sin-resultados">
      <p>No se encontraron productos</p>
    </div>

    <div class="productos" *ngIf="!cargando && !error && productosFiltrados.length > 0">
      <div *ngFor="let producto of productosFiltrados" class="producto">
        <div class="imagen">
          <img [src]="producto.thumbnail" [alt]="producto.title">
        </div>

          <h3>{{ producto.title }}</h3>
          
          <div class="etiquetas">
            <span class="etiqueta">{{ producto.category }}</span>
            <span class="etiqueta">{{ producto.brand }}</span>


          <p class="precio">€{{ producto.price }}</p>

          <button class="btn-agregar" (click)="agregarAlCarrito(producto)">Añadir al carrito</button>
        </div>
      </div>
    </div>
  </main>

  <app-carrito [visible]="carritoVisible" (cerrado)="cerrarCarrito()"></app-carrito>

  <div class="overlay" *ngIf="carritoVisible" (click)="cerrarCarrito()"></div>
</div>
